# (MODX)EvolutionCMS.snippets.ddYMap

Сниппет для вывода на страницу [Яндекс.Карт](https://maps.yandex.ru) в простом виде.

Удобно использовать совместно с виджетом [mm_ddYMap](https://code.divandesign.ru/modx/mm_ddymap).


## Использует

* PHP >= 5.4
* [(MODX)EvolutionCMS.libraries.ddTools](https://code.divandesign.biz/modx/ddtools) >= 0.40.1 (не тестировался с более ранними версиями)


## Документация

**Внимание!** На странице уже должна быть подключена jQuery.


### Установка


#### 1. Элементы → Сниппеты: Создайте новый сниппет со следующими параметрами

1. Название сниппета: `ddYMap`.
2. Описание: `<b>1.6.2</b> Сниппет для вывода на страницу Яндекс.Карт в простом виде.`.
3. Категория: `Core`.
4. Анализировать DocBlock: `no`.
5. Код сниппета (php): Вставьте содержимое файла `ddYMap_snippet.php` из архива.


#### 2. Элементы → Управление файлами

Загрузите файл `jQuery.ddYMap-1.4.min.js` в папку `assets/js/`.


### Описание параметров

Из пары параметров `geoPos` / `geoPos_docField` необходимо передавать лишь один.

* `geoPos`
	* Описание: Координаты на карте (широта и долгота, перечисленные через запятую).
	* Допустимые значения: `string_commaSeparated`
	* **Обязателен**
	
* `geoPos_docField`
	* Описание: Имя поля документа, содержащего координаты, значение которого необходимо получить.
	* Допустимые значения: `string`
	* Значение по умолчанию: —
	
* `geoPos_docId`
	* Описание: ID документа, значение поля которого нужно получить.
	* Допустимые значения: `integer`
	* Значение по умолчанию: — (текущий документ)
	
* `mapElement`
	* Описание: Селектор контейнера, где будет находиться карта.
	* Допустимые значения: `string`
	* Значение по умолчанию: `'#map'`
	
* `defaultType`
	* Описание: Тип карты по умолчанию:
	* Допустимые значения:
		* `'map'` — схема
		* `'satellite'` — спутник
		* `'hybrid'` — гибрид
		* `'publicMap'` — народная карта
		* `'publicMapHybrid'` — народный гибрид
	* Значение по умолчанию: `'map'`
	
* `defaultZoom`
	* Описание: Масштаб карты по умолчанию.
	* Допустимые значения: `integer`
	* Значение по умолчанию: `15`
	
* `icon`
	* Описание: Изображение иконки для метки на карте (относительный путь или URL).
	* Допустимые значения: `string`
	* Значение по умолчанию: — (стандартная иконка Яндекса)
	
* `iconOffset`
	* Описание: Смещение иконки в пикселях относительно базового положения, задается в виде пары чисел, разделенных запятой (`x`, `y`).  
		Базовое положение: иконка располагается горизонтально по центру точки (`geoPos`), вертикально — над точкой.
	* Допустимые значения: `string_commaSeparated`
	* Значение по умолчанию: `'0,0'`
	
* `scrollZoom`
	* Описание: Разрешёно ли изменение масштаба карты колесом мыши?
	* Допустимые значения:
		* `0`
		* `1`
	* Значение по умолчанию: `0`
	
* `mapCenterOffset`
	* Описание: Смещение центра карты относительно центра контейнера в пикселях.
	* Допустимые значения: `string_commaSeparated`
	* Значение по умолчанию: `'0,0'`
	
* `lang`
	* Описание: Идентификатор языка — локаль.
		Подробнее см. документацию [Яндекс.Карт](https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/load-docpage/).  
	* Допустимые значения:
		* `'en_US'`
		* `'ru_RU'`
		* `'ru_UA'`
		* `'uk_UA'`
		* `'tr_TR'`
	* Значение по умолчанию: `'ru_RU'`
	
* `scriptsLocation`
	* Описание: Область куда подключаются JS-скрипты
	* Допустимые значения:
		* `'head'`
		* `'body'`
	* Значение по умолчанию: `'head'`


### Примеры

```
[[ddYMap?
	&geoPos=`55.177446326764496,61.29041790962219`
	&icon=`assets/images/system/mapIcon.png`
]]
```


## Ссылки

* [Home page](https://code.divandesign.ru/modx/ddymap)
* [Telegram chat](https://t.me/dd_code)


<link rel="stylesheet" type="text/css" href="https://DivanDesign.ru/assets/files/ddMarkdown.css" />